#!/bin/bash

# Repparton Application Test Script
# This script helps test all major functionality of the application

echo "ğŸš€ Repparton Application Testing Guide"
echo "======================================="

echo ""
echo "ğŸ“‹ Pre-Test Checklist:"
echo "1. Backend running on http://localhost:8080"
echo "2. Frontend running on http://localhost:5173"
echo "3. Both applications started without errors"

echo ""
echo "ğŸ§ª Manual Testing Steps:"
echo ""

echo "STEP 1: Guest User Testing"
echo "-------------------------"
echo "1. Open http://localhost:5173"
echo "2. âœ… Home page loads with trending content"
echo "3. âœ… Can navigate to Discover page"
echo "4. âœ… Can browse songs and posts"
echo "5. âœ… Login modal appears when trying to like/follow"
echo ""

echo "STEP 2: Login Testing"
echo "--------------------"
echo "Test with these sample accounts:"
echo ""
echo "Admin Account:"
echo "  Email: admin@repparton.com"
echo "  Password: admin123"
echo ""
echo "Artist Accounts:"
echo "  Taylor Swift - taylor@repparton.com / password123"
echo "  Ed Sheeran - ed@repparton.com / password123"
echo "  Billie Eilish - billie@repparton.com / password123"
echo "  The Weeknd - weeknd@repparton.com / password123"
echo ""
echo "Regular Users:"
echo "  Sarah - sarah@example.com / password123"
echo "  Alex - alex@example.com / password123"
echo "  Mike - mike@example.com / password123"
echo ""
echo "Testing Steps:"
echo "1. âœ… Click Login in header"
echo "2. âœ… Enter credentials and submit"
echo "3. âœ… Redirected to home page"
echo "4. âœ… User info appears in header"
echo "5. âœ… Sidebar shows user-specific options"
echo ""

echo "STEP 3: Registration Testing"
echo "---------------------------"
echo "1. âœ… Click Register from login page"
echo "2. âœ… Fill out registration form"
echo "3. âœ… Successfully creates account"
echo "4. âœ… Automatically logs in new user"
echo ""

echo "STEP 4: Navigation Testing"
echo "-------------------------"
echo "Test all main pages:"
echo "1. âœ… Home - Shows personalized feed"
echo "2. âœ… Discover - Browse by genre"
echo "3. âœ… Profile - User profile page"
echo "4. âœ… Playlists - User playlists"
echo "5. âœ… Upload - Song upload (artists only)"
echo "6. âœ… Messages - Messaging system"
echo "7. âœ… Settings - Account settings"
echo "8. âœ… Listen - Music player page"
echo ""

echo "STEP 5: Social Features Testing"
echo "------------------------------"
echo "1. âœ… Like posts and songs"
echo "2. âœ… Follow/unfollow users"
echo "3. âœ… Add comments to posts"
echo "4. âœ… Create and share posts"
echo "5. âœ… View user profiles"
echo "6. âœ… Browse user's content"
echo ""

echo "STEP 6: Artist Features Testing"
echo "------------------------------"
echo "Login as an artist account and test:"
echo "1. âœ… Upload new songs"
echo "2. âœ… Manage uploaded content"
echo "3. âœ… View artist-specific features"
echo "4. âœ… Artist profile displays correctly"
echo ""

echo "STEP 7: Playlist Testing"
echo "-----------------------"
echo "1. âœ… Create new playlist"
echo "2. âœ… Add songs to playlist"
echo "3. âœ… Edit playlist details"
echo "4. âœ… Delete songs from playlist"
echo "5. âœ… Play playlist"
echo ""

echo "STEP 8: Search and Discovery"
echo "---------------------------"
echo "1. âœ… Search for users"
echo "2. âœ… Search for songs"
echo "3. âœ… Browse by genre"
echo "4. âœ… View trending content"
echo "5. âœ… Discover new artists"
echo ""

echo "STEP 9: Error Handling Testing"
echo "-----------------------------"
echo "1. âœ… Invalid login credentials show error"
echo "2. âœ… Network errors are handled gracefully"
echo "3. âœ… Form validation works correctly"
echo "4. âœ… Protected routes redirect properly"
echo "5. âœ… Loading states display during API calls"
echo ""

echo "STEP 10: Logout Testing"
echo "----------------------"
echo "1. âœ… Click logout in header/sidebar"
echo "2. âœ… User is logged out"
echo "3. âœ… Redirected to home page"
echo "4. âœ… Protected features are disabled"
echo "5. âœ… Login modal appears for protected actions"
echo ""

echo ""
echo "ğŸ› Common Issues to Check:"
echo "=========================="
echo "â€¢ Console errors in browser DevTools"
echo "â€¢ Network tab for failed API requests"
echo "â€¢ 403/401 errors for authentication"
echo "â€¢ CORS errors between frontend/backend"
echo "â€¢ Missing or broken images"
echo "â€¢ Broken navigation links"
echo "â€¢ Form submission errors"
echo "â€¢ Responsive design on mobile"
echo ""

echo "âœ… Testing Complete!"
echo "==================="
echo "If all steps pass, the application is working correctly."
echo "Report any failing tests or unexpected behavior."

echo ""
echo "ğŸ”§ Backend API Testing:"
echo "You can also test the API directly using:"
echo "â€¢ Postman collections in Repparton/ folder"
echo "â€¢ API_Tests.http file for VS Code REST Client"
echo "â€¢ Browser: http://localhost:8080/api/songs/trending"
echo ""

echo "ğŸ“Š Database Inspection:"
echo "H2 Console: http://localhost:8080/h2-console"
echo "JDBC URL: jdbc:h2:mem:testdb"
echo "Username: sa"
echo "Password: (leave empty)"
